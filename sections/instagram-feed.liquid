{{ 'section-image-banner.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign fallback_images = 'pdf-images/pdf-img-1-1.png|pdf-images/pdf-img-1-3.png|pdf-images/pdf-img-3-8.png|pdf-images/pdf-img-4-11.png|pdf-images/pdf-img-5-4.png|pdf-images/pdf-img-3-3.png' | split: '|'
-%}

<div class="instagram-feed page-width color-{{ section.settings.color_scheme }}">
  <div class="instagram-feed__header">
    <div class="instagram-feed__title">
      <p class="overline">{{ section.settings.overline }}</p>
      <h2 class="h2">{{ section.settings.heading }}</h2>
    </div>
    <div class="instagram-feed__cta">
      <a class="button" href="{{ section.settings.profile_url }}" target="_blank" rel="noreferrer">
        {{ section.settings.button_label }}
      </a>
    </div>
  </div>

  <div class="instagram-feed__grid">
    {%- for block in section.blocks -%}
      {%- liquid
        assign fallback = fallback_images[forloop.index0]
        assign chosen_image = block.settings.image
      -%}
      <a
        class="instagram-feed__tile"
        href="{{ block.settings.link | default: section.settings.profile_url }}"
        target="_blank"
        rel="noreferrer"
        {{ block.shopify_attributes }}
      >
        {%- if chosen_image != blank -%}
          {{
            chosen_image
            | image_url: width: 1200
            | image_tag:
              loading: 'lazy',
              class: 'instagram-feed__image',
              alt: block.settings.alt | default: section.settings.heading
          }}
        {%- else -%}
          <img
            src="{{ fallback | asset_url }}"
            class="instagram-feed__image"
            loading="lazy"
            alt="{{ block.settings.alt | default: section.settings.heading }}"
          >
        {%- endif -%}
      </a>
    {%- endfor -%}
  </div>
</div>

{% schema %}
{
  "name": "Instagram feed",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "overline",
      "default": "Instagram",
      "label": "Overline"
    },
    {
      "type": "text",
      "id": "heading",
      "default": "Ahyana Modesty moments",
      "label": "Heading"
    },
    {
      "type": "text",
      "id": "profile_url",
      "default": "https://www.instagram.com/ahyana_modesty",
      "label": "Profile URL"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "View Instagram",
      "label": "Button label"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-2",
      "options": [
        { "value": "scheme-1", "label": "Scheme 1" },
        { "value": "scheme-2", "label": "Scheme 2" },
        { "value": "scheme-3", "label": "Scheme 3" },
        { "value": "scheme-4", "label": "Scheme 4" },
        { "value": "scheme-5", "label": "Scheme 5" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "link",
          "label": "Override link",
          "default": ""
        },
        {
          "type": "text",
          "id": "alt",
          "label": "Alt text",
          "default": ""
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Instagram feed",
      "blocks": [
        { "type": "image" },
        { "type": "image" },
        { "type": "image" },
        { "type": "image" },
        { "type": "image" },
        { "type": "image" }
      ]
    }
  ]
}
{% endschema %}
